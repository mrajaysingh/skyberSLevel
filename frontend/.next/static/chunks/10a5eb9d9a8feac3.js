(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,57222,e=>{"use strict";var r=e.i(13697),t=e.i(36699),o=e.i(4859);function a(){let e=(0,o.useRouter)(),r=(0,o.useSearchParams)();return(0,t.useEffect)(()=>{let t=r.get("sessionToken"),o=r.get("refreshToken"),a=r.get("role");t?(async()=>{try{localStorage.setItem("sessionToken",t),o&&localStorage.setItem("refreshToken",o);let r=await fetch("http://localhost:3001/api/auth/verify",{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw Error("Token verification failed");let s=r.headers.get("content-type");if(!s||!s.includes("application/json"))throw Error("Response is not JSON");let l=await r.json();if(l&&l.success&&l.data?.user){localStorage.setItem("userData",JSON.stringify(l.data.user)),localStorage.setItem("skyber_authenticated","true");let r=sessionStorage.getItem("skyber_redirect_after_login");sessionStorage.removeItem("skyber_redirect_after_login"),r?e.replace(r):"super-admin"===a||"super-admin"===l.data.user.role?e.replace("/auth/dashboards/user/super-admin"):e.replace("/")}else e.replace("/login?error=invalid_session")}catch(r){console.error("OAuth callback error:",r),localStorage.removeItem("sessionToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userData"),localStorage.removeItem("skyber_authenticated"),e.replace("/login?error=oauth_failed")}})():e.replace("/login?error=missing_token")},[r]),null}function s(){return(0,r.jsx)(t.Suspense,{fallback:null,children:(0,r.jsx)(a,{})})}e.s(["default",()=>s])}]);