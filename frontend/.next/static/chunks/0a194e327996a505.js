(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13113,e=>{"use strict";e.i(15772);var a=e.i(13697),t=e.i(36699),l=e.i(5385);let s=(0,l.default)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),i=(0,l.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var n=e.i(64547),r=e.i(40550),o=e.i(67881),d=e.i(65030),c=e.i(23750),h=e.i(10708),m=e.i(70065),u=e.i(48774),g=e.i(62870),x=e.i(30374),p=e.i(63644);function f(){let e,l,{user:f,updateUser:b}=(0,d.useSecurity)(),{showSuccess:j}=(0,u.useToast)(),y="/Default/profileBanner/defaultProfileBannerLight.png",v="/Default/profileBanner/defaultProfileBannerDark.png",N="/Default/profileImg/defaultProfile.png",[w,k]=(0,t.useState)(y),[C,S]=(0,t.useState)(!1),[D,I]=(0,t.useState)(N),[T,A]=(0,t.useState)(!1),[B,F]=(0,t.useState)(!1),[L,$]=(0,t.useState)(!1),[_,O]=(0,t.useState)(!1),[P,E]=(0,t.useState)(!1),[M,R]=(0,t.useState)(!1),[G,H]=(0,t.useState)(!1),[z,U]=(0,t.useState)(null),[Y,J]=(0,t.useState)(!1),V=(0,t.useRef)(null),W=(0,t.useRef)(null),[K,q]=(0,t.useState)(!1),[Z,Q]=(0,t.useState)(!1),[X,ee]=(0,t.useState)(""),[ea,et]=(0,t.useState)(""),[el,es]=(0,t.useState)(!1),[ei,en]=(0,t.useState)(!1),[er,eo]=(0,t.useState)({firstName:f?.name?.split(" ")?.[0]??"",middleName:f?.name?.split(" ")?.slice(1,-1).join(" ")??"",lastName:f?.name?.split(" ")?.slice(-1)[0]??"",designation:"",company:"",username:f?.email?.split("@")?.[0]??"",email:f?.email??"",socialFacebook:"",socialLinkedIn:"",socialInstagram:"",googleAnalyticsId:""}),ed=(e,a)=>{eo(t=>({...t,[e]:a}))},ec=async()=>{try{let e=localStorage.getItem("sessionToken");await fetch(`${eu}/api/profile/update`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({firstName:er.firstName,middleName:er.middleName,lastName:er.lastName,designation:er.designation,company:er.company,username:er.username,email:er.email,socialFacebook:er.socialFacebook,socialLinkedIn:er.socialLinkedIn,socialInstagram:er.socialInstagram,googleAnalyticsId:er.googleAnalyticsId?.trim()||""})}).then(async e=>{if(!e.ok)throw Error("Failed to save")});let a=[er.firstName,er.middleName,er.lastName].map(e=>(e||"").trim()).filter(Boolean).join(" ");b({firstName:er.firstName||null,middleName:er.middleName||null,lastName:er.lastName||null,designation:er.designation||null,company:er.company||null,username:er.username||null,email:er.email,name:a||f?.name||null});let t=(D?.startsWith("http")||w?.startsWith("http"))&&!D?.startsWith("data:")&&!w?.startsWith("data:");j("Profile updated",t?"Images saved to Cloud. Profile details saved.":"Profile details saved.")}catch(e){j("Profile updated","Profile details saved.")}},eh=async()=>{if(!ei){en(!0);try{let e=localStorage.getItem("sessionToken");await fetch(`${eu}/api/profile/update`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({googleAnalyticsId:er.googleAnalyticsId?.trim()||""})}).then(async e=>{if(!e.ok)throw Error("Failed to save")}),j("Google Analytics ID saved","Your Google Analytics ID has been updated successfully.")}catch(e){j("Error","Failed to save Google Analytics ID. Please try again.")}finally{en(!1)}}},em=async(e,a,t)=>{let l=await new Promise((a,t)=>{let l=new FileReader;l.onerror=()=>t(Error("Failed to read file")),l.onload=()=>a(String(l.result)),l.readAsDataURL(e)}),s=await new Promise((e,a)=>{let t=new Image;t.onload=()=>e(t),t.onerror=()=>a(Error("Failed to load image")),t.src=l}),i=Math.max(a/s.width,t/s.height),n=s.width*i,r=s.height*i,o=(a-n)/2,d=document.createElement("canvas");d.width=a,d.height=t;let c=d.getContext("2d");if(!c)throw Error("Canvas not supported");return c.fillStyle="#000",c.fillRect(0,0,a,t),c.imageSmoothingQuality="high",c.drawImage(s,o,(t-r)/2,n,r),d.toDataURL("image/jpeg",.92)},eu="http://localhost:3001",[eg,ex]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let e=async()=>{try{let e=localStorage.getItem("sessionToken");if(!e)return;let a=await fetch(`${eu}/api/dashboard/super-admin`,{headers:{Authorization:`Bearer ${e}`},cache:"no-store"});if(!a.ok)return;let t=await a.json(),l=t?.data?.dashboard?.user;l?.avatar&&I(l.avatar),l?.banner&&(k(l.banner),S(!0)),l&&U(l.displayIp||l.currentIp||l.currentRequestIp||null),l&&!eg&&(eo(e=>({firstName:l.firstName??e.firstName??"",middleName:l.middleName??e.middleName??"",lastName:l.lastName??e.lastName??"",designation:l.designation??e.designation??"",company:l.company??e.company??"",username:l.username??e.username??(l.email?String(l.email).split("@")[0]:""),email:l.email??e.email??"",socialFacebook:l.socialFacebook??e.socialFacebook??"",socialLinkedIn:l.socialLinkedIn??e.socialLinkedIn??"",socialInstagram:l.socialInstagram??e.socialInstagram??"",googleAnalyticsId:l.googleAnalyticsId&&"string"==typeof l.googleAnalyticsId?l.googleAnalyticsId:""})),ex(!0)),l&&(R(!!l.githubId),H(!!l.googleId),b({avatar:l.avatar??null,banner:l.banner??null,firstName:l.firstName??null,middleName:l.middleName??null,lastName:l.lastName??null,designation:l.designation??null,company:l.company??null,username:l.username??null,name:l.name??null}))}catch(e){}};e();let a=new URLSearchParams(window.location.search).get("connected");("github"===a||"google"===a)&&(e(),window.history.replaceState({},"",window.location.pathname),j("Connected",`${"github"===a?"GitHub":"Google"} account connected successfully!`))},[eu,eg]),(0,t.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("sessionToken");if(!e)return;let a=await fetch(`${eu}/api/cards/me/full`,{headers:{Authorization:`Bearer ${e}`},cache:"no-store"});if(401===a.status){try{localStorage.removeItem("sessionToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userData"),localStorage.removeItem("skyber_authenticated")}catch(e){}window.location.href="/login";return}if((403===a.status||404===a.status)&&(a=await fetch(`${eu}/api/cards/me`,{headers:{Authorization:`Bearer ${e}`},cache:"no-store"})),!a.ok)return;let t=await a.json(),l=t?.data;if(l){if("cardNumber"in l&&l.cardNumber){let e=String(l.cardNumber);eN(e),eO(e.slice(-4))}else"last4"in l&&eO(l.last4||null);eE(l.brand||null),l.expiryMonth&&ek(String(l.expiryMonth).padStart(2,"0")),l.expiryYear&&eS(String(l.expiryYear)),l.cvv&&eI(String(l.cvv)),eA(!0),eF(!1),eR({cardNumber:"cardNumber"in l?String(l.cardNumber):void 0,expiryMonth:l.expiryMonth?String(l.expiryMonth).padStart(2,"0"):void 0,expiryYear:l.expiryYear?String(l.expiryYear):void 0,cvv:l.cvv?String(l.cvv):void 0})}}catch(e){}})()},[eu]);let ep=()=>{let e="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789",a="";for(let t=0;t<7;t++)a+=e[Math.floor(Math.random()*e.length)];return a},ef=e=>{ee(ep()),et(""),"github"===e?q(!0):Q(!0)},eb=async()=>{if(!Y){J(!0);try{let e=localStorage.getItem("sessionToken");if(!e)return;let a=await fetch(`${eu}/api/dashboard/super-admin?ts=${Date.now()}`,{headers:{Authorization:`Bearer ${e}`},cache:"no-store"});if(a.ok){let e=await a.json(),t=e?.data?.dashboard?.user;t&&U(t.displayIp||t.currentIp||t.currentRequestIp||null)}}finally{J(!1)}}},ej=async e=>{let a=e.target.files?.[0];if(a)try{A(!0);let e=await em(a,1584,396);k(e),S(!0);let t=localStorage.getItem("sessionToken");await fetch(`${eu}/api/profile/upload-image`,{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({type:"banner",dataUrl:e})}).then(async e=>{let a=await e.json().catch(()=>({}));if(e.ok&&a?.url)k(a.url),b({banner:a.url}),j("Saved on Cloud","Banner uploaded to S3");else throw Error(a?.message||"Upload failed")}).catch(()=>{})}catch(a){let e=document.documentElement.classList.contains("dark")?v:y;k(e),b({banner:e})}finally{e.target.value="",A(!1)}},ey=async e=>{let a=e.target.files?.[0];if(a)try{F(!0);let e=await em(a,1e3,1e3);I(e);let t=localStorage.getItem("sessionToken");await fetch(`${eu}/api/profile/upload-image`,{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({type:"avatar",dataUrl:e})}).then(async e=>{let a=await e.json().catch(()=>({}));if(e.ok&&a?.url)I(a.url),b({avatar:a.url}),j("Saved on Cloud","Profile photo uploaded to S3");else throw Error(a?.message||"Upload failed")}).catch(()=>{})}catch(e){I(N),b({avatar:N})}finally{e.target.value="",F(!1)}},[ev,eN]=(0,t.useState)(""),[ew,ek]=(0,t.useState)(""),[eC,eS]=(0,t.useState)(""),[eD,eI]=(0,t.useState)(""),[eT,eA]=(0,t.useState)(!1),[eB,eF]=(0,t.useState)(!0),[eL,e$]=(0,t.useState)(!1),[e_,eO]=(0,t.useState)(null),[eP,eE]=(0,t.useState)(null),[eM,eR]=(0,t.useState)(null),[eG,eH]=(0,t.useState)(!1),[ez,eU]=(0,t.useState)(!1),[eY,eJ]=(0,t.useState)(!1),[eV,eW]=(0,t.useState)(!1),[eK,eq]=(0,t.useState)(!1),[eZ,eQ]=(0,t.useState)(!1),[eX,e0]=(0,t.useState)(!1),e1=Array.from({length:12},(e,a)=>String(a+1).padStart(2,"0")),e2=new Date().getFullYear(),e4=Array.from({length:16},(e,a)=>String(e2+a)),e5=e=>e.replace(/\D/g,"").slice(0,16).replace(/(.{4})/g,"$1 ").trim(),e3=eD||"000",e6=(()=>{if(ev)return e5(ev);if(e_){let e=e_.replace(/\s+/g,"");return 16===e.length?e5(e):e_}return"9759 2484 5269 6576"})(),e8=(eP||"").toUpperCase()||"MASTERCARD",e7=async()=>{try{let e=localStorage.getItem("sessionToken");if(!e)return;await fetch(`${eu}/api/cards/save`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({cardNumber:ev,expiryMonth:ew,expiryYear:eC,cvv:eD})}).then(async e=>{if(!e.ok)throw Error("Failed to save")}),eO(ev.slice(-4)),eA(!0),eF(!1),eR({cardNumber:ev,expiryMonth:ew,expiryYear:eC,cvv:eD}),j("Card saved","Your card details were updated.")}catch(e){}},e9=[er.firstName,er.middleName,er.lastName].map(e=>(e||"").trim()).filter(Boolean).join(" ")||f?.name||"Kevin Smith",ae=(e=(er.designation||"").trim(),l=(er.company||"").trim(),e&&l?`${e} at ${l}`:e||l||"Advisor and Consultant at Stripe Inc."),aa=(er.username||"").trim()||"kevinsmith55",at=e=>e.replace(/^https?:\/\//,"").replace(/^www\./,""),al=at(er.socialFacebook.trim()),as=at(er.socialInstagram.trim());return(0,t.useEffect)(()=>{let e=()=>{C||k(document.documentElement.classList.contains("dark")?v:y)};e();let a=new MutationObserver(()=>e());return a.observe(document.documentElement,{attributes:!0,attributeFilter:["data-dashboard-theme","class"]}),()=>a.disconnect()},[C]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.DashboardHeader,{title:"Super Admin Dashboard",subtitle:"- Skyber Engine v 7SKB.R2.02.5",ip:z,onRefresh:eb,refreshing:Y}),(0,a.jsxs)(r.DashboardBody,{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Profile"}),(0,a.jsx)("section",{className:"rounded-xl border overflow-hidden bg-background",children:(0,a.jsxs)("div",{className:"relative h-48 sm:h-56 lg:h-64 w-full bg-muted",children:[(0,a.jsx)("img",{src:w,alt:"Profile banner",className:"h-full w-full object-cover"}),(0,a.jsx)("button",{onClick:()=>V.current?.click(),className:"absolute right-4 bottom-4 inline-flex items-center justify-center h-10 w-10 rounded-full border bg-background/80 backdrop-blur hover:bg-background transition-colors z-20","aria-label":"Change banner",title:"Change banner",children:T?(0,a.jsx)("span",{className:"h-5 w-5 rounded-full border-2 border-white/40 border-t-white animate-spin"}):(0,a.jsx)(s,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>$(!0),className:"absolute right-16 bottom-4 inline-flex items-center justify-center h-10 w-10 rounded-full border bg-background/80 backdrop-blur hover:bg-background transition-colors z-20","aria-label":"Delete banner",title:"Delete banner",children:(0,a.jsx)(i,{className:"h-5 w-5"})}),(0,a.jsx)("input",{ref:V,type:"file",accept:"image/*",className:"hidden",onChange:ej}),(0,a.jsx)("div",{className:"absolute inset-x-4 bottom-4 flex items-end justify-between z-10",children:(0,a.jsxs)("div",{className:"flex items-end gap-4",children:[(0,a.jsxs)("div",{className:"relative h-20 w-20 sm:h-24 sm:w-24 rounded-full ring-2 ring-white/80 shadow-md overflow-hidden bg-black",children:[(0,a.jsx)("img",{src:D,alt:"User avatar",className:"h-full w-full object-cover"}),(0,a.jsx)("button",{onClick:()=>W.current?.click(),className:"absolute right-1.5 bottom-1.5 inline-flex items-center justify-center h-7 w-7 rounded-full border bg-white/80 backdrop-blur hover:bg-white transition-colors text-black","aria-label":"Change photo",children:B?(0,a.jsx)("span",{className:"h-4 w-4 rounded-full border-2 border-black/40 border-t-black animate-spin"}):(0,a.jsx)(s,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>O(!0),className:"absolute left-1.5 bottom-1.5 inline-flex items-center justify-center h-7 w-7 rounded-full border bg-white/80 backdrop-blur hover:bg-white transition-colors text-black","aria-label":"Delete photo",children:(0,a.jsx)(i,{className:"h-4 w-4"})}),(0,a.jsx)("input",{ref:W,type:"file",accept:"image/*",className:"hidden",onChange:ey})]}),(0,a.jsxs)("div",{className:"pb-1 text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.6)] px-3 py-2 rounded-md bg-black/55 backdrop-blur-sm ring-1 ring-white/10",children:[(0,a.jsx)("h3",{className:"text-xl sm:text-2xl font-bold leading-tight",children:e9}),(0,a.jsx)("p",{className:"text-xs sm:text-sm opacity-90",children:ae}),(0,a.jsxs)("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-[10px] sm:text-xs opacity-90",children:[(0,a.jsxs)("span",{children:["@ ",aa]}),(0,a.jsx)("span",{children:al}),(0,a.jsx)("span",{children:as})]})]})]})})]})}),(0,a.jsx)(x.Dialog,{open:L,onOpenChange:$,children:(0,a.jsxs)(x.DialogContent,{children:[(0,a.jsxs)(x.DialogHeader,{children:[(0,a.jsx)(x.DialogTitle,{children:"Delete banner"}),(0,a.jsx)(x.DialogDescription,{children:"Are you sure you want to delete your banner?"})]}),(0,a.jsxs)(x.DialogFooter,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,a.jsx)(o.Button,{variant:"outline",onClick:()=>$(!1),disabled:P,children:"Cancel"}),(0,a.jsx)(o.Button,{className:"bg-red-600 hover:bg-red-700 text-white",disabled:P,onClick:async()=>{if(!P){E(!0);try{let e=localStorage.getItem("sessionToken");await fetch(`${eu}/api/profile/delete-image`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({type:"banner"})}),S(!1);let a=document.documentElement.classList.contains("dark")?v:y;k(a),b({banner:a}),$(!1),j("Deleted","Banner removed and restored to default")}finally{E(!1)}}},children:"Delete"})]})]})}),(0,a.jsx)(x.Dialog,{open:_,onOpenChange:O,children:(0,a.jsxs)(x.DialogContent,{children:[(0,a.jsxs)(x.DialogHeader,{children:[(0,a.jsx)(x.DialogTitle,{children:"Delete profile photo"}),(0,a.jsx)(x.DialogDescription,{children:"Are you sure you want to delete your profile photo?"})]}),(0,a.jsxs)(x.DialogFooter,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,a.jsx)(o.Button,{variant:"outline",onClick:()=>O(!1),disabled:P,children:"Cancel"}),(0,a.jsx)(o.Button,{className:"bg-red-600 hover:bg-red-700 text-white",disabled:P,onClick:async()=>{if(!P){E(!0);try{let e=localStorage.getItem("sessionToken");await fetch(`${eu}/api/profile/delete-image`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({type:"avatar"})}),I(N),b({avatar:N}),O(!1),j("Deleted","Profile photo removed and restored to default")}finally{E(!1)}}},children:"Delete"})]})]})}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)(m.Card,{className:"shadow-sm",children:[(0,a.jsx)(m.CardHeader,{children:(0,a.jsx)(m.CardTitle,{children:"Profile Details"})}),(0,a.jsxs)(m.CardContent,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"firstName",children:"First name"}),(0,a.jsx)(c.Input,{id:"firstName",value:er.firstName,onChange:e=>ed("firstName",e.target.value),placeholder:"Ajay"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"middleName",children:"Middle name"}),(0,a.jsx)(c.Input,{id:"middleName",value:er.middleName,onChange:e=>ed("middleName",e.target.value),placeholder:"Singh"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"lastName",children:"Last name"}),(0,a.jsx)(c.Input,{id:"lastName",value:er.lastName,onChange:e=>ed("lastName",e.target.value),placeholder:"Rajput"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"designation",children:"Designation"}),(0,a.jsx)(c.Input,{id:"designation",value:er.designation,onChange:e=>ed("designation",e.target.value),placeholder:"Advisor and Consultant"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"company",children:"Company"}),(0,a.jsx)(c.Input,{id:"company",value:er.company,onChange:e=>ed("company",e.target.value),placeholder:"Stripe Inc."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"username",children:"Username"}),(0,a.jsx)(c.Input,{id:"username",value:er.username,onChange:e=>ed("username",e.target.value),placeholder:"ajay_singh"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)(h.Label,{htmlFor:"email",children:"Email"}),(0,a.jsx)(c.Input,{id:"email",type:"email",value:er.email,onChange:e=>ed("email",e.target.value),placeholder:"admin@skyber.dev"})]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"Social media"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"fb",children:"Facebook handle"}),(0,a.jsx)(c.Input,{id:"fb",value:er.socialFacebook,onChange:e=>ed("socialFacebook",e.target.value),placeholder:"facebook.com/ajay"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"li",children:"LinkedIn"}),(0,a.jsx)(c.Input,{id:"li",value:er.socialLinkedIn,onChange:e=>ed("socialLinkedIn",e.target.value),placeholder:"linkedin.com/in/ajay"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"ig",children:"Instagram"}),(0,a.jsx)(c.Input,{id:"ig",value:er.socialInstagram,onChange:e=>ed("socialInstagram",e.target.value),placeholder:"instagram.com/ajay"})]})]})]}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)(o.Button,{className:"bg-[#17D492] hover:bg-[#17D492]/90 text-white",onClick:ec,children:"Save profile details"})})]})]})}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)(m.Card,{className:"shadow-sm",children:[(0,a.jsx)(m.CardHeader,{children:(0,a.jsx)(m.CardTitle,{children:"Connected accounts"})}),(0,a.jsx)(m.CardContent,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"relative w-10 h-10 rounded-full bg-background border border-border flex items-center justify-center",children:(0,a.jsx)(p.default,{src:"/AuthImg/GithubAuthIcon.svg",alt:"GitHub",width:24,height:24,className:"opacity-90"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"GitHub"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:M?"Connected":"Not connected"})]})]}),M?(0,a.jsx)("button",{onClick:()=>ef("github"),className:"inline-flex items-center px-3 py-2 rounded-md border bg-red-600 text-white hover:opacity-90",children:"Disconnect"}):(0,a.jsx)("a",{href:`${eu}/api/auth/oauth/github?connect=true&sessionToken=${encodeURIComponent(localStorage.getItem("sessionToken")||"")}`,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center px-3 py-2 rounded-md border ${M?"bg-muted text-foreground":"bg-[#0d1117] text-white"} hover:opacity-90`,children:"Connect"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"relative w-10 h-10 rounded-full bg-background border border-border flex items-center justify-center",children:(0,a.jsx)(p.default,{src:"/AuthImg/GoogleAuthIcon.svg",alt:"Google",width:24,height:24,className:"opacity-90"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Google"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:G?"Connected":"Not connected"})]})]}),G?(0,a.jsx)("button",{onClick:()=>ef("google"),className:"inline-flex items-center px-3 py-2 rounded-md border bg-red-600 text-white hover:opacity-90",children:"Disconnect"}):(0,a.jsx)("a",{href:`${eu}/api/auth/oauth/google?connect=true&sessionToken=${encodeURIComponent(localStorage.getItem("sessionToken")||"")}`,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center px-3 py-2 rounded-md border ${G?"bg-muted text-foreground":"bg-red-600 text-white"} hover:opacity-90`,children:"Connect"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between border rounded-lg p-4 md:col-span-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Facebook"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Not available yet"})]}),(0,a.jsx)("button",{className:"inline-flex items-center px-3 py-2 rounded-md border bg-muted text-muted-foreground cursor-not-allowed",disabled:!0,children:"Coming soon"})]})]})})]})}),(0,a.jsx)(x.Dialog,{open:K,onOpenChange:e=>{!el&&(q(e),e&&(ee(ep()),et("")))},children:(0,a.jsxs)(x.DialogContent,{children:[(0,a.jsxs)(x.DialogHeader,{children:[(0,a.jsx)(x.DialogTitle,{children:"Disconnect GitHub"}),(0,a.jsx)(x.DialogDescription,{children:"This will remove all GitHub references and clear your social links from the database. Type the code to confirm."})]}),(0,a.jsxs)("div",{className:"grid gap-3 py-2",children:[(0,a.jsx)("div",{className:"text-sm",children:"Confirmation code:"}),(0,a.jsx)("div",{className:"font-mono text-lg tracking-widest select-none px-3 py-2 rounded border bg-muted inline-block",children:X}),(0,a.jsx)(c.Input,{placeholder:"Type the code here",value:ea,onChange:e=>et(e.target.value)})]}),(0,a.jsxs)(x.DialogFooter,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,a.jsx)(o.Button,{variant:"outline",onClick:()=>q(!1),disabled:el,children:"Cancel"}),(0,a.jsx)(o.Button,{className:"bg-red-600 hover:bg-red-700 text-white",disabled:el||0===X.length||ea.trim()!==X,onClick:async()=>{if(!el){es(!0);try{let e=localStorage.getItem("sessionToken");await fetch(`${eu}/api/profile/disconnect-social`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({provider:"github"})}),R(!1),eo(e=>({...e,socialFacebook:"",socialLinkedIn:"",socialInstagram:""})),q(!1),j("Disconnected","GitHub disconnected and social links cleared")}finally{es(!1)}}},children:"Disconnect"})]})]})}),(0,a.jsx)(x.Dialog,{open:Z,onOpenChange:e=>{!el&&(Q(e),e&&(ee(ep()),et("")))},children:(0,a.jsxs)(x.DialogContent,{children:[(0,a.jsxs)(x.DialogHeader,{children:[(0,a.jsx)(x.DialogTitle,{children:"Disconnect Google"}),(0,a.jsx)(x.DialogDescription,{children:"This will remove all Google references and clear your social links from the database. Type the code to confirm."})]}),(0,a.jsxs)("div",{className:"grid gap-3 py-2",children:[(0,a.jsx)("div",{className:"text-sm",children:"Confirmation code:"}),(0,a.jsx)("div",{className:"font-mono text-lg tracking-widest select-none px-3 py-2 rounded border bg-muted inline-block",children:X}),(0,a.jsx)(c.Input,{placeholder:"Type the code here",value:ea,onChange:e=>et(e.target.value)})]}),(0,a.jsxs)(x.DialogFooter,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,a.jsx)(o.Button,{variant:"outline",onClick:()=>Q(!1),disabled:el,children:"Cancel"}),(0,a.jsx)(o.Button,{className:"bg-red-600 hover:bg-red-700 text-white",disabled:el||0===X.length||ea.trim()!==X,onClick:async()=>{if(!el){es(!0);try{let e=localStorage.getItem("sessionToken");await fetch(`${eu}/api/profile/disconnect-social`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({provider:"google"})}),H(!1),eo(e=>({...e,socialFacebook:"",socialLinkedIn:"",socialInstagram:""})),Q(!1),j("Disconnected","Google disconnected and social links cleared")}finally{es(!1)}}},children:"Disconnect"})]})]})}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)(m.Card,{className:"shadow-sm",children:[(0,a.jsx)(m.CardHeader,{children:(0,a.jsx)(m.CardTitle,{children:"Payment"})}),(0,a.jsx)(m.CardContent,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsxs)("div",{className:`relative [transform-style:preserve-3d] transition-transform duration-700 ${eL?"[transform:rotateY(180deg)]":""}`,style:{width:320,height:200,perspective:1e3},onMouseEnter:()=>{eD.length>0&&e$(!0)},onMouseLeave:()=>{eD.length>0&&e$(!1)},children:[(0,a.jsxs)("div",{className:"absolute inset-0 rounded-xl bg-[#0f0f0f] text-white overflow-hidden [backface-visibility:hidden] border-[1.5px] border-[#ff9800] dark:border-white shadow-[0_12px_28px_rgba(0,0,0,0.35)] dark:shadow-[0_12px_28px_rgba(255,255,255,0.20)]",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(120%_120%_at_100%_0%,rgba(255,152,0,0.15),transparent_60%),radial-gradient(120%_120%_at_0%_100%,rgba(255,61,0,0.15),transparent_60%)]"}),(0,a.jsxs)("div",{className:"relative w-full h-full p-5",children:[(0,a.jsx)("p",{className:"absolute text-[10px] tracking-[0.2em] top-4 right-4",children:e8}),(0,a.jsxs)("svg",{className:"absolute bottom-6 right-6",xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 48 48",children:[(0,a.jsx)("path",{fill:"#ff9800",d:"M32 10A14 14 0 1 0 32 38A14 14 0 1 0 32 10Z"}),(0,a.jsx)("path",{fill:"#d50000",d:"M16 10A14 14 0 1 0 16 38A14 14 0 1 0 16 10Z"}),(0,a.jsx)("path",{fill:"#ff3d00",d:"M18,24c0,4.755,2.376,8.95,6,11.48c3.624-2.53,6-6.725,6-11.48s-2.376-8.95-6-11.48 C20.376,15.05,18,19.245,18,24z"})]}),(0,a.jsxs)("svg",{className:"absolute top-5 left-5",width:"30",height:"30",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("rect",{x:"8",y:"12",width:"34",height:"26",rx:"4",fill:"#c8ad7f"}),(0,a.jsx)("rect",{x:"13",y:"16",width:"24",height:"4",fill:"#b89c70"}),(0,a.jsx)("rect",{x:"13",y:"22",width:"10",height:"2",fill:"#b89c70"}),(0,a.jsx)("rect",{x:"13",y:"26",width:"24",height:"8",fill:"#b89c70"})]}),(0,a.jsx)("svg",{className:"absolute top-10 right-14",width:"20",height:"20",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M12 25c4-6 10-6 14 0m-8-6c3-4 7-4 10 0m-12 12c5-8 13-8 18 0",stroke:"#fff",strokeWidth:"2",fill:"none"})}),(0,a.jsx)("p",{className:"absolute font-semibold text-lg left-5 bottom-16 tracking-wider font-mono",children:e6}),(0,a.jsxs)("div",{className:"absolute left-5 bottom-10 flex items-center gap-3 text-[10px]",children:[(0,a.jsx)("span",{className:"opacity-80",children:"VALID THRU"}),(0,a.jsxs)("span",{className:"font-semibold text-sm",children:[ew||"12"," / ",eC?eC.slice(-2):"24"]})]}),(0,a.jsx)("p",{className:"absolute left-5 bottom-4 font-semibold text-sm",children:er.firstName||er.lastName?`${er.firstName} ${er.lastName}`.toUpperCase():"BRUCE WAYNE"})]})]}),(0,a.jsx)("div",{className:"absolute inset-0 rounded-xl bg-[#0f0f0f] text-white overflow-hidden [backface-visibility:hidden] [transform:rotateY(180deg)] border-[1.5px] border-[#ff9800] dark:border-white shadow-[0_12px_28px_rgba(0,0,0,0.35)] dark:shadow-[0_12px_28px_rgba(255,255,255,0.20)]",children:(0,a.jsxs)("div",{className:"relative w-full h-full",children:[(0,a.jsx)("div",{className:"absolute top-6 left-0 right-0 h-8 bg-gradient-to-r from-[#303030] to-[#202020]"}),(0,a.jsx)("div",{className:"absolute top-24 left-5",children:(0,a.jsx)("div",{className:"bg-white rounded px-2 py-1 w-40",children:(0,a.jsx)("span",{className:"text-black font-bold tracking-widest",children:e3})})})]})})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"cardNum",children:"Card number"}),(0,a.jsx)(c.Input,{id:"cardNum",inputMode:"numeric",maxLength:19,value:e5(ev),onChange:e=>eN(e.target.value.replace(/\D/g,"").slice(0,16)),placeholder:"1234 5678 9012 3456",className:eB?"mt-1":"mt-1 bg-muted text-muted-foreground cursor-default",disabled:!eB})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{children:"Expiry month"}),eB?(0,a.jsxs)(g.Select,{value:ew,onValueChange:ek,children:[(0,a.jsx)(g.SelectTrigger,{className:"mt-2",children:(0,a.jsx)(g.SelectValue,{placeholder:"MM"})}),(0,a.jsx)(g.SelectContent,{children:e1.map(e=>(0,a.jsx)(g.SelectItem,{value:e,children:e},e))})]}):(0,a.jsx)("div",{className:"mt-2 rounded-md border border-muted bg-muted px-3 py-2 text-sm text-muted-foreground",children:ew||"--"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{children:"Expiry year"}),eB?(0,a.jsxs)(g.Select,{value:eC,onValueChange:eS,children:[(0,a.jsx)(g.SelectTrigger,{className:"mt-2",children:(0,a.jsx)(g.SelectValue,{placeholder:"YYYY"})}),(0,a.jsx)(g.SelectContent,{children:e4.map(e=>(0,a.jsx)(g.SelectItem,{value:e,children:e},e))})]}):(0,a.jsx)("div",{className:"mt-2 rounded-md border border-muted bg-muted px-3 py-2 text-sm text-muted-foreground",children:eC||"----"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"cvv",children:"CVV"}),(0,a.jsx)(c.Input,{id:"cvv",type:"password",inputMode:"numeric",maxLength:4,value:eD,onChange:e=>eI(e.target.value.replace(/\D/g,"").slice(0,4)),onFocus:()=>e$(!0),onBlur:()=>e$(!1),placeholder:"***",className:eB?"mt-1":"mt-1 bg-muted text-muted-foreground cursor-default",disabled:!eB})]}),e_&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Saved card: ",ev?e5(ev):e6]}),(0,a.jsx)("div",{className:"flex gap-2 justify-end pt-2",children:eB?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Button,{className:"bg-[#17D492] hover:bg-[#17D492]/90 text-white",onClick:e7,children:"Save card"}),(0,a.jsx)(o.Button,{variant:"outline",onClick:()=>{eM?(eN(eM.cardNumber??""),ek(eM.expiryMonth??""),eS(eM.expiryYear??""),eI(eM.cvv??"")):(eN(""),ek(""),eS(""),eI("")),eF(!1)},children:"Cancel"})]}):(0,a.jsx)(o.Button,{variant:"outline",onClick:()=>eF(!0),children:"Edit card"})})]})})]})})]})}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)(m.Card,{className:"shadow-sm",children:[(0,a.jsx)(m.CardHeader,{children:(0,a.jsx)(m.CardTitle,{children:"Google Analytics"})}),(0,a.jsx)(m.CardContent,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"googleAnalyticsId",children:"Google Analytics ID"}),(0,a.jsx)(c.Input,{id:"googleAnalyticsId",value:er.googleAnalyticsId||"",onChange:e=>ed("googleAnalyticsId",e.target.value),placeholder:"G-DL87JFLJF2",className:"mt-2"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Enter your Google Analytics tracking ID (e.g., G-DL87JFLJF2). This will be used across the entire site."})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(o.Button,{className:"bg-[#17D492] hover:bg-[#17D492]/90 text-white",onClick:eh,disabled:ei,children:ei?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"h-4 w-4 rounded-full border-2 border-white/40 border-t-white animate-spin mr-2"}),"Saving..."]}):"Save Google Analytics ID"})})]})})]})}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsxs)(m.Card,{className:"shadow-sm border-red-300",children:[(0,a.jsx)(m.CardHeader,{children:(0,a.jsx)(m.CardTitle,{className:"text-red-600",children:"Danger zone"})}),(0,a.jsx)(m.CardContent,{children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Download a copy of your data or delete your account."}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(o.Button,{variant:"outline",onClick:()=>{eW(!1),eJ(!0)},children:"Download my data"}),(0,a.jsx)(o.Button,{className:"bg-yellow-500 hover:bg-yellow-600 text-black",onClick:()=>eH(!0),children:"Delete account"})]})]})})]})}),(0,a.jsx)(x.Dialog,{open:eY,onOpenChange:e=>{eZ||eJ(e)},children:(0,a.jsxs)(x.DialogContent,{children:[(0,a.jsxs)(x.DialogHeader,{children:[(0,a.jsx)(x.DialogTitle,{children:"Download your data"}),(0,a.jsx)(x.DialogDescription,{children:"To proceed, you must agree to Skyber agreements about handling exported data."})]}),(0,a.jsx)("div",{className:"space-y-3 text-sm",children:(0,a.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:eV,onChange:e=>eW(e.target.checked)}),(0,a.jsx)("span",{children:"I agree to Skyber agreements and understand the data will be downloaded as JSON."})]})}),(0,a.jsxs)(x.DialogFooter,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,a.jsx)(o.Button,{variant:"outline",onClick:()=>eJ(!1),disabled:eZ,children:"Cancel"}),(0,a.jsx)(o.Button,{onClick:async()=>{if(eV&&!eZ){eQ(!0);try{let e=localStorage.getItem("sessionToken"),a=await fetch(`${eu}/api/profile/export`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}});if(!a.ok)throw Error("Export failed");let t=await a.json(),l=t?.data||{},s=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),i=URL.createObjectURL(s),n=document.createElement("a");n.href=i;let r=new Date().toISOString().replace(/[:.]/g,"-");n.download=`skyber-account-export-${r}.json`,document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(i),eJ(!1),j("Data ready","Your data was downloaded as JSON.")}catch(e){}finally{eQ(!1)}}},disabled:!eV||eZ,children:eZ?"Preparingâ€¦":"Download JSON"})]})]})}),(0,a.jsx)(x.Dialog,{open:eG,onOpenChange:e=>{eX||eH(e)},children:(0,a.jsxs)(x.DialogContent,{className:"border-yellow-400",children:[(0,a.jsxs)(x.DialogHeader,{children:[(0,a.jsx)(x.DialogTitle,{className:"text-yellow-600",children:"Delete account?"}),(0,a.jsx)(x.DialogDescription,{children:"We recommend downloading your data before deletion. You can skip backup and proceed."})]}),(0,a.jsxs)(x.DialogFooter,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,a.jsx)(o.Button,{variant:"outline",onClick:()=>{eH(!1),eW(!1),eJ(!0)},children:"Download data"}),(0,a.jsx)(o.Button,{className:"bg-yellow-500 hover:bg-yellow-600 text-black",onClick:()=>{eH(!1),eq(!1),eU(!0)},children:"Proceed without backup"})]})]})}),(0,a.jsx)(x.Dialog,{open:ez,onOpenChange:e=>{eX||eU(e)},children:(0,a.jsxs)(x.DialogContent,{children:[(0,a.jsxs)(x.DialogHeader,{children:[(0,a.jsx)(x.DialogTitle,{children:"Confirm account deletion"}),(0,a.jsx)(x.DialogDescription,{children:"This will remove your account from the app immediately. Your data will be archived internally."})]}),(0,a.jsx)("div",{className:"space-y-3 text-sm",children:(0,a.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:eK,onChange:e=>eq(e.target.checked)}),(0,a.jsx)("span",{children:"I understand and agree to Skyber agreements."})]})}),(0,a.jsxs)(x.DialogFooter,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,a.jsx)(o.Button,{variant:"outline",onClick:()=>eU(!1),disabled:eX,children:"Cancel"}),(0,a.jsx)(o.Button,{className:"bg-red-600 hover:bg-red-700 text-white",disabled:!eK||eX,onClick:async()=>{if(eK&&!eX){e0(!0);try{let e=localStorage.getItem("sessionToken");if(!(await fetch(`${eu}/api/profile/delete-account`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({agree:!0})})).ok)throw Error("Delete failed");try{localStorage.removeItem("sessionToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userData"),localStorage.removeItem("skyber_authenticated")}catch(e){}b({avatar:null,banner:null,email:"",name:null,firstName:null,lastName:null,username:null}),eU(!1),window.location.href="/login"}catch(e){}finally{e0(!1)}}},children:"Delete account"})]})]})})]})]})}e.s(["default",()=>f],13113)}]);