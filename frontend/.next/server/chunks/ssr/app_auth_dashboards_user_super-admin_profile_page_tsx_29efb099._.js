module.exports=[93642,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=(0,a.i(70106).default)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var e=a.i(81560),f=a.i(77644),g=a.i(79491),h=a.i(40695),i=a.i(22665),j=a.i(5522),k=a.i(17171),l=a.i(3130),m=a.i(1684),n=a.i(87682),o=a.i(65733),p=a.i(50542);function q(){let a,q,{user:r,updateUser:s}=(0,i.useSecurity)(),{showSuccess:t}=(0,m.useToast)(),u="/Default/profileBanner/defaultProfileBannerLight.png",v="/Default/profileBanner/defaultProfileBannerDark.png",w="/Default/profileImg/defaultProfile.png",[x,y]=(0,c.useState)(u),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(w),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)(null),[T,U]=(0,c.useState)(!1),V=(0,c.useRef)(null),W=(0,c.useRef)(null),[X,Y]=(0,c.useState)(!1),[Z,$]=(0,c.useState)(!1),[_,aa]=(0,c.useState)(""),[ab,ac]=(0,c.useState)(""),[ad,ae]=(0,c.useState)(!1),[af,ag]=(0,c.useState)(!1),[ah,ai]=(0,c.useState)({firstName:r?.name?.split(" ")?.[0]??"",middleName:r?.name?.split(" ")?.slice(1,-1).join(" ")??"",lastName:r?.name?.split(" ")?.slice(-1)[0]??"",designation:"",company:"",username:r?.email?.split("@")?.[0]??"",email:r?.email??"",socialFacebook:"",socialLinkedIn:"",socialInstagram:"",googleAnalyticsId:""}),aj=(a,b)=>{ai(c=>({...c,[a]:b}))},ak=async()=>{try{await fetch(`${an}/api/profile/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:ah.firstName,middleName:ah.middleName,lastName:ah.lastName,designation:ah.designation,company:ah.company,username:ah.username,email:ah.email,socialFacebook:ah.socialFacebook,socialLinkedIn:ah.socialLinkedIn,socialInstagram:ah.socialInstagram,googleAnalyticsId:ah.googleAnalyticsId?.trim()||""})}).then(async a=>{if(!a.ok)throw Error("Failed to save")});let a=[ah.firstName,ah.middleName,ah.lastName].map(a=>(a||"").trim()).filter(Boolean).join(" ");s({firstName:ah.firstName||null,middleName:ah.middleName||null,lastName:ah.lastName||null,designation:ah.designation||null,company:ah.company||null,username:ah.username||null,email:ah.email,name:a||r?.name||null});let b=(B?.startsWith("http")||x?.startsWith("http"))&&!B?.startsWith("data:")&&!x?.startsWith("data:");t("Profile updated",b?"Images saved to Cloud. Profile details saved.":"Profile details saved.")}catch(a){t("Profile updated","Profile details saved.")}},al=async()=>{if(!af){ag(!0);try{await fetch(`${an}/api/profile/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({googleAnalyticsId:ah.googleAnalyticsId?.trim()||""})}).then(async a=>{if(!a.ok)throw Error("Failed to save")}),t("Google Analytics ID saved","Your Google Analytics ID has been updated successfully.")}catch(a){t("Error","Failed to save Google Analytics ID. Please try again.")}finally{ag(!1)}}},am=async(a,b,c)=>{let d=await new Promise((b,c)=>{let d=new FileReader;d.onerror=()=>c(Error("Failed to read file")),d.onload=()=>b(String(d.result)),d.readAsDataURL(a)}),e=await new Promise((a,b)=>{let c=new Image;c.onload=()=>a(c),c.onerror=()=>b(Error("Failed to load image")),c.src=d}),f=Math.max(b/e.width,c/e.height),g=e.width*f,h=e.height*f,i=(b-g)/2,j=document.createElement("canvas");j.width=b,j.height=c;let k=j.getContext("2d");if(!k)throw Error("Canvas not supported");return k.fillStyle="#000",k.fillRect(0,0,b,c),k.imageSmoothingQuality="high",k.drawImage(e,i,(c-h)/2,g,h),j.toDataURL("image/jpeg",.92)},an="http://localhost:3001",[ao,ap]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let a=async()=>{try{return}catch(a){}};a();let b=new URLSearchParams(window.location.search).get("connected");("github"===b||"google"===b)&&(a(),window.history.replaceState({},"",window.location.pathname),t("Connected",`${"github"===b?"GitHub":"Google"} account connected successfully!`))},[an,ao]),(0,c.useEffect)(()=>{(async()=>{try{return}catch(a){}})()},[an]);let aq=()=>{let a="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789",b="";for(let c=0;c<7;c++)b+=a[Math.floor(Math.random()*a.length)];return b},ar=a=>{aa(aq()),ac(""),"github"===a?Y(!0):$(!0)},as=async()=>{if(!T){U(!0);try{return}finally{U(!1)}}},at=async a=>{let b=a.target.files?.[0];if(b)try{E(!0);let a=await am(b,1584,396);y(a),A(!0),await fetch(`${an}/api/profile/upload-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"banner",dataUrl:a})}).then(async a=>{let b=await a.json().catch(()=>({}));if(a.ok&&b?.url)y(b.url),s({banner:b.url}),t("Saved on Cloud","Banner uploaded to S3");else throw Error(b?.message||"Upload failed")}).catch(()=>{})}catch(b){let a=document.documentElement.classList.contains("dark")?v:u;y(a),s({banner:a})}finally{a.target.value="",E(!1)}},au=async a=>{let b=a.target.files?.[0];if(b)try{G(!0);let a=await am(b,1e3,1e3);C(a),await fetch(`${an}/api/profile/upload-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"avatar",dataUrl:a})}).then(async a=>{let b=await a.json().catch(()=>({}));if(a.ok&&b?.url)C(b.url),s({avatar:b.url}),t("Saved on Cloud","Profile photo uploaded to S3");else throw Error(b?.message||"Upload failed")}).catch(()=>{})}catch(a){C(w),s({avatar:w})}finally{a.target.value="",G(!1)}},[av,aw]=(0,c.useState)(""),[ax,ay]=(0,c.useState)(""),[az,aA]=(0,c.useState)(""),[aB,aC]=(0,c.useState)(""),[aD,aE]=(0,c.useState)(!1),[aF,aG]=(0,c.useState)(!0),[aH,aI]=(0,c.useState)(!1),[aJ,aK]=(0,c.useState)(null),[aL,aM]=(0,c.useState)(null),[aN,aO]=(0,c.useState)(null),[aP,aQ]=(0,c.useState)(!1),[aR,aS]=(0,c.useState)(!1),[aT,aU]=(0,c.useState)(!1),[aV,aW]=(0,c.useState)(!1),[aX,aY]=(0,c.useState)(!1),[aZ,a$]=(0,c.useState)(!1),[a_,a0]=(0,c.useState)(!1),a1=Array.from({length:12},(a,b)=>String(b+1).padStart(2,"0")),a2=new Date().getFullYear(),a3=Array.from({length:16},(a,b)=>String(a2+b)),a4=a=>a.replace(/\D/g,"").slice(0,16).replace(/(.{4})/g,"$1 ").trim(),a5=aB||"000",a6=(()=>{if(av)return a4(av);if(aJ){let a=aJ.replace(/\s+/g,"");return 16===a.length?a4(a):aJ}return"9759 2484 5269 6576"})(),a7=(aL||"").toUpperCase()||"MASTERCARD",a8=async()=>{try{return}catch(a){}},a9=[ah.firstName,ah.middleName,ah.lastName].map(a=>(a||"").trim()).filter(Boolean).join(" ")||r?.name||"Kevin Smith",ba=(a=(ah.designation||"").trim(),q=(ah.company||"").trim(),a&&q?`${a} at ${q}`:a||q||"Advisor and Consultant at Stripe Inc."),bb=(ah.username||"").trim()||"kevinsmith55",bc=a=>a.replace(/^https?:\/\//,"").replace(/^www\./,""),bd=bc(ah.socialFacebook.trim()),be=bc(ah.socialInstagram.trim());return(0,c.useEffect)(()=>{let a=()=>{z||y(document.documentElement.classList.contains("dark")?v:u)};a();let b=new MutationObserver(()=>a());return b.observe(document.documentElement,{attributes:!0,attributeFilter:["data-dashboard-theme","class"]}),()=>b.disconnect()},[z]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.DashboardHeader,{title:"Super Admin Dashboard",subtitle:"- Skyber Engine v 7SKB.R2.02.5",ip:R,onRefresh:as,refreshing:T}),(0,b.jsxs)(g.DashboardBody,{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Profile"}),(0,b.jsx)("section",{className:"rounded-xl border overflow-hidden bg-background",children:(0,b.jsxs)("div",{className:"relative h-48 sm:h-56 lg:h-64 w-full bg-muted",children:[(0,b.jsx)("img",{src:x,alt:"Profile banner",className:"h-full w-full object-cover"}),(0,b.jsx)("button",{onClick:()=>V.current?.click(),className:"absolute right-4 bottom-4 inline-flex items-center justify-center h-10 w-10 rounded-full border bg-background/80 backdrop-blur hover:bg-background transition-colors z-20","aria-label":"Change banner",title:"Change banner",children:D?(0,b.jsx)("span",{className:"h-5 w-5 rounded-full border-2 border-white/40 border-t-white animate-spin"}):(0,b.jsx)(d,{className:"h-5 w-5"})}),(0,b.jsx)("button",{onClick:()=>I(!0),className:"absolute right-16 bottom-4 inline-flex items-center justify-center h-10 w-10 rounded-full border bg-background/80 backdrop-blur hover:bg-background transition-colors z-20","aria-label":"Delete banner",title:"Delete banner",children:(0,b.jsx)(e.Trash2,{className:"h-5 w-5"})}),(0,b.jsx)("input",{ref:V,type:"file",accept:"image/*",className:"hidden",onChange:at}),(0,b.jsx)("div",{className:"absolute inset-x-4 bottom-4 flex items-end justify-between z-10",children:(0,b.jsxs)("div",{className:"flex items-end gap-4",children:[(0,b.jsxs)("div",{className:"relative h-20 w-20 sm:h-24 sm:w-24 rounded-full ring-2 ring-white/80 shadow-md overflow-hidden bg-black",children:[(0,b.jsx)("img",{src:B,alt:"User avatar",className:"h-full w-full object-cover"}),(0,b.jsx)("button",{onClick:()=>W.current?.click(),className:"absolute right-1.5 bottom-1.5 inline-flex items-center justify-center h-7 w-7 rounded-full border bg-white/80 backdrop-blur hover:bg-white transition-colors text-black","aria-label":"Change photo",children:F?(0,b.jsx)("span",{className:"h-4 w-4 rounded-full border-2 border-black/40 border-t-black animate-spin"}):(0,b.jsx)(d,{className:"h-4 w-4"})}),(0,b.jsx)("button",{onClick:()=>K(!0),className:"absolute left-1.5 bottom-1.5 inline-flex items-center justify-center h-7 w-7 rounded-full border bg-white/80 backdrop-blur hover:bg-white transition-colors text-black","aria-label":"Delete photo",children:(0,b.jsx)(e.Trash2,{className:"h-4 w-4"})}),(0,b.jsx)("input",{ref:W,type:"file",accept:"image/*",className:"hidden",onChange:au})]}),(0,b.jsxs)("div",{className:"pb-1 text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.6)] px-3 py-2 rounded-md bg-black/55 backdrop-blur-sm ring-1 ring-white/10",children:[(0,b.jsx)("h3",{className:"text-xl sm:text-2xl font-bold leading-tight",children:a9}),(0,b.jsx)("p",{className:"text-xs sm:text-sm opacity-90",children:ba}),(0,b.jsxs)("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-[10px] sm:text-xs opacity-90",children:[(0,b.jsxs)("span",{children:["@ ",bb]}),(0,b.jsx)("span",{children:bd}),(0,b.jsx)("span",{children:be})]})]})]})})]})}),(0,b.jsx)(o.Dialog,{open:H,onOpenChange:I,children:(0,b.jsxs)(o.DialogContent,{children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Delete banner"}),(0,b.jsx)(o.DialogDescription,{children:"Are you sure you want to delete your banner?"})]}),(0,b.jsxs)(o.DialogFooter,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>I(!1),disabled:L,children:"Cancel"}),(0,b.jsx)(h.Button,{className:"bg-red-600 hover:bg-red-700 text-white",disabled:L,onClick:async()=>{if(!L){M(!0);try{await fetch(`${an}/api/profile/delete-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"banner"})}),A(!1);let a=document.documentElement.classList.contains("dark")?v:u;y(a),s({banner:a}),I(!1),t("Deleted","Banner removed and restored to default")}finally{M(!1)}}},children:"Delete"})]})]})}),(0,b.jsx)(o.Dialog,{open:J,onOpenChange:K,children:(0,b.jsxs)(o.DialogContent,{children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Delete profile photo"}),(0,b.jsx)(o.DialogDescription,{children:"Are you sure you want to delete your profile photo?"})]}),(0,b.jsxs)(o.DialogFooter,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>K(!1),disabled:L,children:"Cancel"}),(0,b.jsx)(h.Button,{className:"bg-red-600 hover:bg-red-700 text-white",disabled:L,onClick:async()=>{if(!L){M(!0);try{await fetch(`${an}/api/profile/delete-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"avatar"})}),C(w),s({avatar:w}),K(!1),t("Deleted","Profile photo removed and restored to default")}finally{M(!1)}}},children:"Delete"})]})]})}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsx)(l.CardTitle,{children:"Profile Details"})}),(0,b.jsxs)(l.CardContent,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"firstName",children:"First name"}),(0,b.jsx)(j.Input,{id:"firstName",value:ah.firstName,onChange:a=>aj("firstName",a.target.value),placeholder:"Ajay"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"middleName",children:"Middle name"}),(0,b.jsx)(j.Input,{id:"middleName",value:ah.middleName,onChange:a=>aj("middleName",a.target.value),placeholder:"Singh"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"lastName",children:"Last name"}),(0,b.jsx)(j.Input,{id:"lastName",value:ah.lastName,onChange:a=>aj("lastName",a.target.value),placeholder:"Rajput"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"designation",children:"Designation"}),(0,b.jsx)(j.Input,{id:"designation",value:ah.designation,onChange:a=>aj("designation",a.target.value),placeholder:"Advisor and Consultant"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"company",children:"Company"}),(0,b.jsx)(j.Input,{id:"company",value:ah.company,onChange:a=>aj("company",a.target.value),placeholder:"Stripe Inc."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"username",children:"Username"}),(0,b.jsx)(j.Input,{id:"username",value:ah.username,onChange:a=>aj("username",a.target.value),placeholder:"ajay_singh"})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)(k.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(j.Input,{id:"email",type:"email",value:ah.email,onChange:a=>aj("email",a.target.value),placeholder:"admin@skyber.dev"})]})]}),(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"Social media"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"fb",children:"Facebook handle"}),(0,b.jsx)(j.Input,{id:"fb",value:ah.socialFacebook,onChange:a=>aj("socialFacebook",a.target.value),placeholder:"facebook.com/ajay"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"li",children:"LinkedIn"}),(0,b.jsx)(j.Input,{id:"li",value:ah.socialLinkedIn,onChange:a=>aj("socialLinkedIn",a.target.value),placeholder:"linkedin.com/in/ajay"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"ig",children:"Instagram"}),(0,b.jsx)(j.Input,{id:"ig",value:ah.socialInstagram,onChange:a=>aj("socialInstagram",a.target.value),placeholder:"instagram.com/ajay"})]})]})]}),(0,b.jsx)("div",{className:"mt-6 flex justify-end",children:(0,b.jsx)(h.Button,{className:"bg-[#17D492] hover:bg-[#17D492]/90 text-white",onClick:ak,children:"Save profile details"})})]})]})}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsx)(l.CardTitle,{children:"Connected accounts"})}),(0,b.jsx)(l.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between border rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"relative w-10 h-10 rounded-full bg-background border border-border flex items-center justify-center",children:(0,b.jsx)(p.default,{src:"/AuthImg/GithubAuthIcon.svg",alt:"GitHub",width:24,height:24,className:"opacity-90"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"GitHub"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:N?"Connected":"Not connected"})]})]}),N?(0,b.jsx)("button",{onClick:()=>ar("github"),className:"inline-flex items-center px-3 py-2 rounded-md border bg-red-600 text-white hover:opacity-90",children:"Disconnect"}):(0,b.jsx)("a",{href:`${an}/api/auth/oauth/github?connect=true&sessionToken=${encodeURIComponent("")}`,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center px-3 py-2 rounded-md border ${N?"bg-muted text-foreground":"bg-[#0d1117] text-white"} hover:opacity-90`,children:"Connect"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between border rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"relative w-10 h-10 rounded-full bg-background border border-border flex items-center justify-center",children:(0,b.jsx)(p.default,{src:"/AuthImg/GoogleAuthIcon.svg",alt:"Google",width:24,height:24,className:"opacity-90"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Google"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:P?"Connected":"Not connected"})]})]}),P?(0,b.jsx)("button",{onClick:()=>ar("google"),className:"inline-flex items-center px-3 py-2 rounded-md border bg-red-600 text-white hover:opacity-90",children:"Disconnect"}):(0,b.jsx)("a",{href:`${an}/api/auth/oauth/google?connect=true&sessionToken=${encodeURIComponent("")}`,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center px-3 py-2 rounded-md border ${P?"bg-muted text-foreground":"bg-red-600 text-white"} hover:opacity-90`,children:"Connect"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between border rounded-lg p-4 md:col-span-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Facebook"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Not available yet"})]}),(0,b.jsx)("button",{className:"inline-flex items-center px-3 py-2 rounded-md border bg-muted text-muted-foreground cursor-not-allowed",disabled:!0,children:"Coming soon"})]})]})})]})}),(0,b.jsx)(o.Dialog,{open:X,onOpenChange:a=>{!ad&&(Y(a),a&&(aa(aq()),ac("")))},children:(0,b.jsxs)(o.DialogContent,{children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Disconnect GitHub"}),(0,b.jsx)(o.DialogDescription,{children:"This will remove all GitHub references and clear your social links from the database. Type the code to confirm."})]}),(0,b.jsxs)("div",{className:"grid gap-3 py-2",children:[(0,b.jsx)("div",{className:"text-sm",children:"Confirmation code:"}),(0,b.jsx)("div",{className:"font-mono text-lg tracking-widest select-none px-3 py-2 rounded border bg-muted inline-block",children:_}),(0,b.jsx)(j.Input,{placeholder:"Type the code here",value:ab,onChange:a=>ac(a.target.value)})]}),(0,b.jsxs)(o.DialogFooter,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>Y(!1),disabled:ad,children:"Cancel"}),(0,b.jsx)(h.Button,{className:"bg-red-600 hover:bg-red-700 text-white",disabled:ad||0===_.length||ab.trim()!==_,onClick:async()=>{if(!ad){ae(!0);try{await fetch(`${an}/api/profile/disconnect-social`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:"github"})}),O(!1),ai(a=>({...a,socialFacebook:"",socialLinkedIn:"",socialInstagram:""})),Y(!1),t("Disconnected","GitHub disconnected and social links cleared")}finally{ae(!1)}}},children:"Disconnect"})]})]})}),(0,b.jsx)(o.Dialog,{open:Z,onOpenChange:a=>{!ad&&($(a),a&&(aa(aq()),ac("")))},children:(0,b.jsxs)(o.DialogContent,{children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Disconnect Google"}),(0,b.jsx)(o.DialogDescription,{children:"This will remove all Google references and clear your social links from the database. Type the code to confirm."})]}),(0,b.jsxs)("div",{className:"grid gap-3 py-2",children:[(0,b.jsx)("div",{className:"text-sm",children:"Confirmation code:"}),(0,b.jsx)("div",{className:"font-mono text-lg tracking-widest select-none px-3 py-2 rounded border bg-muted inline-block",children:_}),(0,b.jsx)(j.Input,{placeholder:"Type the code here",value:ab,onChange:a=>ac(a.target.value)})]}),(0,b.jsxs)(o.DialogFooter,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>$(!1),disabled:ad,children:"Cancel"}),(0,b.jsx)(h.Button,{className:"bg-red-600 hover:bg-red-700 text-white",disabled:ad||0===_.length||ab.trim()!==_,onClick:async()=>{if(!ad){ae(!0);try{await fetch(`${an}/api/profile/disconnect-social`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:"google"})}),Q(!1),ai(a=>({...a,socialFacebook:"",socialLinkedIn:"",socialInstagram:""})),$(!1),t("Disconnected","Google disconnected and social links cleared")}finally{ae(!1)}}},children:"Disconnect"})]})]})}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsx)(l.CardTitle,{children:"Payment"})}),(0,b.jsx)(l.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsxs)("div",{className:`relative [transform-style:preserve-3d] transition-transform duration-700 ${aH?"[transform:rotateY(180deg)]":""}`,style:{width:320,height:200,perspective:1e3},onMouseEnter:()=>{aB.length>0&&aI(!0)},onMouseLeave:()=>{aB.length>0&&aI(!1)},children:[(0,b.jsxs)("div",{className:"absolute inset-0 rounded-xl bg-[#0f0f0f] text-white overflow-hidden [backface-visibility:hidden] border-[1.5px] border-[#ff9800] dark:border-white shadow-[0_12px_28px_rgba(0,0,0,0.35)] dark:shadow-[0_12px_28px_rgba(255,255,255,0.20)]",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(120%_120%_at_100%_0%,rgba(255,152,0,0.15),transparent_60%),radial-gradient(120%_120%_at_0%_100%,rgba(255,61,0,0.15),transparent_60%)]"}),(0,b.jsxs)("div",{className:"relative w-full h-full p-5",children:[(0,b.jsx)("p",{className:"absolute text-[10px] tracking-[0.2em] top-4 right-4",children:a7}),(0,b.jsxs)("svg",{className:"absolute bottom-6 right-6",xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 48 48",children:[(0,b.jsx)("path",{fill:"#ff9800",d:"M32 10A14 14 0 1 0 32 38A14 14 0 1 0 32 10Z"}),(0,b.jsx)("path",{fill:"#d50000",d:"M16 10A14 14 0 1 0 16 38A14 14 0 1 0 16 10Z"}),(0,b.jsx)("path",{fill:"#ff3d00",d:"M18,24c0,4.755,2.376,8.95,6,11.48c3.624-2.53,6-6.725,6-11.48s-2.376-8.95-6-11.48 C20.376,15.05,18,19.245,18,24z"})]}),(0,b.jsxs)("svg",{className:"absolute top-5 left-5",width:"30",height:"30",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:[(0,b.jsx)("rect",{x:"8",y:"12",width:"34",height:"26",rx:"4",fill:"#c8ad7f"}),(0,b.jsx)("rect",{x:"13",y:"16",width:"24",height:"4",fill:"#b89c70"}),(0,b.jsx)("rect",{x:"13",y:"22",width:"10",height:"2",fill:"#b89c70"}),(0,b.jsx)("rect",{x:"13",y:"26",width:"24",height:"8",fill:"#b89c70"})]}),(0,b.jsx)("svg",{className:"absolute top-10 right-14",width:"20",height:"20",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{d:"M12 25c4-6 10-6 14 0m-8-6c3-4 7-4 10 0m-12 12c5-8 13-8 18 0",stroke:"#fff",strokeWidth:"2",fill:"none"})}),(0,b.jsx)("p",{className:"absolute font-semibold text-lg left-5 bottom-16 tracking-wider font-mono",children:a6}),(0,b.jsxs)("div",{className:"absolute left-5 bottom-10 flex items-center gap-3 text-[10px]",children:[(0,b.jsx)("span",{className:"opacity-80",children:"VALID THRU"}),(0,b.jsxs)("span",{className:"font-semibold text-sm",children:[ax||"12"," / ",az?az.slice(-2):"24"]})]}),(0,b.jsx)("p",{className:"absolute left-5 bottom-4 font-semibold text-sm",children:ah.firstName||ah.lastName?`${ah.firstName} ${ah.lastName}`.toUpperCase():"BRUCE WAYNE"})]})]}),(0,b.jsx)("div",{className:"absolute inset-0 rounded-xl bg-[#0f0f0f] text-white overflow-hidden [backface-visibility:hidden] [transform:rotateY(180deg)] border-[1.5px] border-[#ff9800] dark:border-white shadow-[0_12px_28px_rgba(0,0,0,0.35)] dark:shadow-[0_12px_28px_rgba(255,255,255,0.20)]",children:(0,b.jsxs)("div",{className:"relative w-full h-full",children:[(0,b.jsx)("div",{className:"absolute top-6 left-0 right-0 h-8 bg-gradient-to-r from-[#303030] to-[#202020]"}),(0,b.jsx)("div",{className:"absolute top-24 left-5",children:(0,b.jsx)("div",{className:"bg-white rounded px-2 py-1 w-40",children:(0,b.jsx)("span",{className:"text-black font-bold tracking-widest",children:a5})})})]})})]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"cardNum",children:"Card number"}),(0,b.jsx)(j.Input,{id:"cardNum",inputMode:"numeric",maxLength:19,value:a4(av),onChange:a=>aw(a.target.value.replace(/\D/g,"").slice(0,16)),placeholder:"1234 5678 9012 3456",className:aF?"mt-1":"mt-1 bg-muted text-muted-foreground cursor-default",disabled:!aF})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{children:"Expiry month"}),aF?(0,b.jsxs)(n.Select,{value:ax,onValueChange:ay,children:[(0,b.jsx)(n.SelectTrigger,{className:"mt-2",children:(0,b.jsx)(n.SelectValue,{placeholder:"MM"})}),(0,b.jsx)(n.SelectContent,{children:a1.map(a=>(0,b.jsx)(n.SelectItem,{value:a,children:a},a))})]}):(0,b.jsx)("div",{className:"mt-2 rounded-md border border-muted bg-muted px-3 py-2 text-sm text-muted-foreground",children:ax||"--"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{children:"Expiry year"}),aF?(0,b.jsxs)(n.Select,{value:az,onValueChange:aA,children:[(0,b.jsx)(n.SelectTrigger,{className:"mt-2",children:(0,b.jsx)(n.SelectValue,{placeholder:"YYYY"})}),(0,b.jsx)(n.SelectContent,{children:a3.map(a=>(0,b.jsx)(n.SelectItem,{value:a,children:a},a))})]}):(0,b.jsx)("div",{className:"mt-2 rounded-md border border-muted bg-muted px-3 py-2 text-sm text-muted-foreground",children:az||"----"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"cvv",children:"CVV"}),(0,b.jsx)(j.Input,{id:"cvv",type:"password",inputMode:"numeric",maxLength:4,value:aB,onChange:a=>aC(a.target.value.replace(/\D/g,"").slice(0,4)),onFocus:()=>aI(!0),onBlur:()=>aI(!1),placeholder:"***",className:aF?"mt-1":"mt-1 bg-muted text-muted-foreground cursor-default",disabled:!aF})]}),aJ&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Saved card: ",av?a4(av):a6]}),(0,b.jsx)("div",{className:"flex gap-2 justify-end pt-2",children:aF?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Button,{className:"bg-[#17D492] hover:bg-[#17D492]/90 text-white",onClick:a8,children:"Save card"}),(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>{aN?(aw(aN.cardNumber??""),ay(aN.expiryMonth??""),aA(aN.expiryYear??""),aC(aN.cvv??"")):(aw(""),ay(""),aA(""),aC("")),aG(!1)},children:"Cancel"})]}):(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>aG(!0),children:"Edit card"})})]})})]})})]})}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsx)(l.CardTitle,{children:"Google Analytics"})}),(0,b.jsx)(l.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"googleAnalyticsId",children:"Google Analytics ID"}),(0,b.jsx)(j.Input,{id:"googleAnalyticsId",value:ah.googleAnalyticsId||"",onChange:a=>aj("googleAnalyticsId",a.target.value),placeholder:"G-DL87JFLJF2",className:"mt-2"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Enter your Google Analytics tracking ID (e.g., G-DL87JFLJF2). This will be used across the entire site."})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)(h.Button,{className:"bg-[#17D492] hover:bg-[#17D492]/90 text-white",onClick:al,disabled:af,children:af?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"h-4 w-4 rounded-full border-2 border-white/40 border-t-white animate-spin mr-2"}),"Saving..."]}):"Save Google Analytics ID"})})]})})]})}),(0,b.jsx)("div",{className:"mt-8",children:(0,b.jsxs)(l.Card,{className:"shadow-sm border-red-300",children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsx)(l.CardTitle,{className:"text-red-600",children:"Danger zone"})}),(0,b.jsx)(l.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Download a copy of your data or delete your account."}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>{aW(!1),aU(!0)},children:"Download my data"}),(0,b.jsx)(h.Button,{className:"bg-yellow-500 hover:bg-yellow-600 text-black",onClick:()=>aQ(!0),children:"Delete account"})]})]})})]})}),(0,b.jsx)(o.Dialog,{open:aT,onOpenChange:a=>{aZ||aU(a)},children:(0,b.jsxs)(o.DialogContent,{children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Download your data"}),(0,b.jsx)(o.DialogDescription,{children:"To proceed, you must agree to Skyber agreements about handling exported data."})]}),(0,b.jsx)("div",{className:"space-y-3 text-sm",children:(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:aV,onChange:a=>aW(a.target.checked)}),(0,b.jsx)("span",{children:"I agree to Skyber agreements and understand the data will be downloaded as JSON."})]})}),(0,b.jsxs)(o.DialogFooter,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>aU(!1),disabled:aZ,children:"Cancel"}),(0,b.jsx)(h.Button,{onClick:async()=>{if(aV&&!aZ){a$(!0);try{let a=await fetch(`${an}/api/profile/export`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Export failed");let b=await a.json(),c=b?.data||{},d=new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),e=URL.createObjectURL(d),f=document.createElement("a");f.href=e;let g=new Date().toISOString().replace(/[:.]/g,"-");f.download=`skyber-account-export-${g}.json`,document.body.appendChild(f),f.click(),f.remove(),URL.revokeObjectURL(e),aU(!1),t("Data ready","Your data was downloaded as JSON.")}catch(a){}finally{a$(!1)}}},disabled:!aV||aZ,children:aZ?"Preparingâ€¦":"Download JSON"})]})]})}),(0,b.jsx)(o.Dialog,{open:aP,onOpenChange:a=>{a_||aQ(a)},children:(0,b.jsxs)(o.DialogContent,{className:"border-yellow-400",children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{className:"text-yellow-600",children:"Delete account?"}),(0,b.jsx)(o.DialogDescription,{children:"We recommend downloading your data before deletion. You can skip backup and proceed."})]}),(0,b.jsxs)(o.DialogFooter,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>{aQ(!1),aW(!1),aU(!0)},children:"Download data"}),(0,b.jsx)(h.Button,{className:"bg-yellow-500 hover:bg-yellow-600 text-black",onClick:()=>{aQ(!1),aY(!1),aS(!0)},children:"Proceed without backup"})]})]})}),(0,b.jsx)(o.Dialog,{open:aR,onOpenChange:a=>{a_||aS(a)},children:(0,b.jsxs)(o.DialogContent,{children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Confirm account deletion"}),(0,b.jsx)(o.DialogDescription,{children:"This will remove your account from the app immediately. Your data will be archived internally."})]}),(0,b.jsx)("div",{className:"space-y-3 text-sm",children:(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:aX,onChange:a=>aY(a.target.checked)}),(0,b.jsx)("span",{children:"I understand and agree to Skyber agreements."})]})}),(0,b.jsxs)(o.DialogFooter,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>aS(!1),disabled:a_,children:"Cancel"}),(0,b.jsx)(h.Button,{className:"bg-red-600 hover:bg-red-700 text-white",disabled:!aX||a_,onClick:async()=>{if(aX&&!a_){a0(!0);try{if(!(await fetch(`${an}/api/profile/delete-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agree:!0})})).ok)throw Error("Delete failed");try{localStorage.removeItem("sessionToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userData"),localStorage.removeItem("skyber_authenticated")}catch(a){}s({avatar:null,banner:null,email:"",name:null,firstName:null,lastName:null,username:null}),aS(!1),window.location.href="/login"}catch(a){}finally{a0(!1)}}},children:"Delete account"})]})]})})]})]})}a.s(["default",()=>q],93642)}];

//# sourceMappingURL=app_auth_dashboards_user_super-admin_profile_page_tsx_29efb099._.js.map