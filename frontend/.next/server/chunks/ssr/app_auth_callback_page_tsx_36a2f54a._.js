module.exports=[27850,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let a=(0,d.useRouter)(),b=(0,d.useSearchParams)();return(0,c.useEffect)(()=>{let c=b.get("sessionToken"),d=b.get("refreshToken"),e=b.get("role");c?(async()=>{try{localStorage.setItem("sessionToken",c),d&&localStorage.setItem("refreshToken",d);let b=await fetch("http://localhost:3001/api/auth/verify",{method:"GET",headers:{Authorization:`Bearer ${c}`}});if(!b.ok)throw Error("Token verification failed");let f=b.headers.get("content-type");if(!f||!f.includes("application/json"))throw Error("Response is not JSON");let g=await b.json();if(g&&g.success&&g.data?.user){localStorage.setItem("userData",JSON.stringify(g.data.user)),localStorage.setItem("skyber_authenticated","true");let b=sessionStorage.getItem("skyber_redirect_after_login");sessionStorage.removeItem("skyber_redirect_after_login"),b?a.replace(b):"super-admin"===e||"super-admin"===g.data.user.role?a.replace("/auth/dashboards/user/super-admin"):a.replace("/")}else a.replace("/login?error=invalid_session")}catch(b){console.error("OAuth callback error:",b),localStorage.removeItem("sessionToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userData"),localStorage.removeItem("skyber_authenticated"),a.replace("/login?error=oauth_failed")}})():a.replace("/login?error=missing_token")},[b]),null}function f(){return(0,b.jsx)(c.Suspense,{fallback:null,children:(0,b.jsx)(e,{})})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_auth_callback_page_tsx_36a2f54a._.js.map