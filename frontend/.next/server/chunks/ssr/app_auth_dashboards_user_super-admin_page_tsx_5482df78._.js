module.exports=[61832,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(22665),f=a.i(40695),g=a.i(65733),h=a.i(1027),i=a.i(69520),j=a.i(20494),k=a.i(35125),l=a.i(67453),m=a.i(62722),n=a.i(3130),o=a.i(1684),p=a.i(77644),q=a.i(79491);function r(){let{logout:a,user:r}=(0,e.useSecurity)(),s=(0,d.useRouter)(),{showSuccess:t}=(0,o.useToast)(),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(""),I="http://localhost:3001",J=async(a=!1)=>{try{a?z(!0):x(!0);let b=localStorage.getItem("sessionToken");if(!b)return void s.push("/login");let c=a?`${I}/api/dashboard/super-admin?ts=${Date.now()}`:`${I}/api/dashboard/super-admin`,d=await fetch(c,{cache:"no-store",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json","Cache-Control":"no-store, no-cache, must-revalidate"}});if(401===d.status){localStorage.removeItem("sessionToken"),s.push("/login");return}if(!d.ok)throw Error(`HTTP error! status: ${d.status}`);let e=d.headers.get("content-type");if(!e||!e.includes("application/json"))throw Error("Response is not JSON");let f=await d.json();f.success?v(f.data.dashboard):console.error("Dashboard API error:",f.message)}catch(a){console.error("Error fetching dashboard data:",a),a instanceof TypeError&&"Failed to fetch"===a.message?(console.error("âŒ Backend server may be down or unreachable."),console.error("ðŸ“ Expected backend URL:",I),console.error("ðŸ’¡ Please ensure:"),console.error("   1. Backend server is running (npm run dev in backend folder)"),console.error("   2. Backend is accessible at:",I),console.error("   3. CORS is properly configured"),console.error("   4. No firewall is blocking the connection")):a instanceof Error&&a.message?.includes("HTTP error")?console.error("HTTP Error:",a.message):console.error("Unknown error:",a)}finally{x(!1),z(!1)}};(0,c.useEffect)(()=>{J()},[s,I]);let K=async()=>{if(!A){B(!0);try{await J(!0);try{s.refresh()}catch(a){}}finally{B(!1)}}};(0,c.useEffect)(()=>{let a=()=>{let a=new Date,b=new Intl.DateTimeFormat("en-IN",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"Asia/Kolkata"}),c=new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"short",day:"2-digit",timeZone:"Asia/Kolkata"}),d=b.format(a),e=c.format(a);H(`${d} â€¢ ${e}`)};a();let b=setInterval(a,1e3);return()=>clearInterval(b)},[]);let L=async()=>{if(!E){F(!0);try{t("Logout successful","Redirecting to Home..."),await new Promise(a=>setTimeout(a,250));try{localStorage.removeItem("sessionId"),localStorage.removeItem("sessionToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userData"),localStorage.removeItem("skyber_authenticated"),sessionStorage.clear()}catch(a){}await a()}finally{F(!1),D(!1)}}};return(0,c.useEffect)(()=>{r&&"super-admin"!==r.role&&s.push("/")},[r,s]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Dialog,{open:C,onOpenChange:a=>{E||D(a)},children:(0,b.jsxs)(g.DialogContent,{children:[(0,b.jsxs)(g.DialogHeader,{children:[(0,b.jsx)(g.DialogTitle,{children:"Confirm Logout"}),(0,b.jsx)(g.DialogDescription,{children:"Are you sure you want to log out?"})]}),(0,b.jsxs)(g.DialogFooter,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>D(!1),disabled:E,children:"Stay"}),(0,b.jsx)(f.Button,{className:"bg-[#17D492] hover:bg-[#17D492]/90 text-white",onClick:L,disabled:E,children:E?(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"h-4 w-4 rounded-full border-2 border-white/40 border-t-white animate-spin"}),"Cleaning..."]}):"Clean"})]})]})}),(0,b.jsx)(p.DashboardHeader,{title:"Super Admin Dashboard",subtitle:"- Skyber Engine v 7SKB.R2.02.5",ip:u?.user?.displayIp||u?.user?.currentIp||u?.user?.currentRequestIp||null,onRefresh:K,refreshing:A}),(0,b.jsx)(q.DashboardBody,{children:w?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#17D492] mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading dashboard..."})]})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(n.Card,{className:"shadow-sm hover:shadow-md transition-shadow",children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Zap,{className:"h-5 w-5 text-[#17D492]"}),"Welcome, ",r?.name||"Super Admin"]})}),(0,b.jsxs)(n.CardContent,{children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"This is your secure super admin dashboard. You have full access to system management and configuration."}),(r||u?.user)&&(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mt-4",children:[(0,b.jsxs)("div",{className:"bg-secondary rounded-lg p-3 border",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Time"}),(0,b.jsx)("p",{className:"font-medium text-sm skyber-text",children:A?"":G}),A&&(0,b.jsx)("span",{className:"mt-2 inline-block h-3 w-3 rounded-full border-2 border-foreground/30 border-t-[#17D492] animate-spin"})]}),(0,b.jsxs)("div",{className:"bg-secondary rounded-lg p-3 border",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Email"}),(0,b.jsx)("p",{className:"font-medium text-sm",children:A?"":r?.email||u?.user?.email}),A&&(0,b.jsx)("span",{className:"mt-2 inline-block h-3 w-3 rounded-full border-2 border-foreground/30 border-t-[#17D492] animate-spin"})]}),(0,b.jsxs)("div",{className:"bg-secondary rounded-lg p-3 border",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Role"}),(0,b.jsx)("p",{className:"font-medium text-sm capitalize",children:A?"":r?.role||"super-admin"}),A&&(0,b.jsx)("span",{className:"mt-2 inline-block h-3 w-3 rounded-full border-2 border-foreground/30 border-t-[#17D492] animate-spin"})]}),(0,b.jsxs)("div",{className:"bg-secondary rounded-lg p-3 border",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Plan Tier"}),(0,b.jsx)("p",{className:"font-medium text-sm capitalize",children:A?"":r?.planTier||u?.user?.planTier||"enterprise"}),A&&(0,b.jsx)("span",{className:"mt-2 inline-block h-3 w-3 rounded-full border-2 border-foreground/30 border-t-[#17D492] animate-spin"})]}),(0,b.jsxs)("div",{className:"bg-secondary rounded-lg p-3 border",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Status"}),(0,b.jsx)("p",{className:"font-medium text-sm text-[#17D492]",children:A?"":u?.user?.isActive!==!1?"Active":"Inactive"}),A&&(0,b.jsx)("span",{className:"mt-2 inline-block h-3 w-3 rounded-full border-2 border-foreground/30 border-t-[#17D492] animate-spin"})]})]}),(0,b.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"System Status"}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>J(!0),disabled:y,className:"flex items-center gap-2",children:[(0,b.jsx)(i.RefreshCw,{className:`h-4 w-4 ${y?"animate-spin":""}`}),"Refresh"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,b.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4 border",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"User ID"}),(0,b.jsx)("p",{className:"font-medium text-sm font-mono break-all",children:A?"":u?.user?.id||r?.id||"N/A"}),A&&(0,b.jsx)("span",{className:"mt-2 inline-block h-3 w-3 rounded-full border-2 border-foreground/30 border-t-[#17D492] animate-spin"})]}),(0,b.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4 border",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Session ID"}),(0,b.jsx)("p",{className:"font-medium text-sm font-mono break-all",children:A?"":u?.systemInfo?.session?.id||"N/A"}),A&&(0,b.jsx)("span",{className:"mt-2 inline-block h-3 w-3 rounded-full border-2 border-foreground/30 border-t-[#17D492] animate-spin"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsx)("div",{className:"bg-secondary/50 rounded-lg p-4 border shadow-sm hover:shadow-md transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(j.Database,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Database"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"PostgreSQL (Prisma)"})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:A?(0,b.jsx)("span",{className:"ml-2 inline-block h-3 w-3 rounded-full border-2 border-foreground/30 border-t-[#17D492] animate-spin"}):u?.systemInfo?.database?.status==="active"?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.CheckCircle2,{className:"h-5 w-5 text-[#17D492]"}),(0,b.jsx)("span",{className:"text-sm font-medium text-[#17D492]",children:"Active"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.XCircle,{className:"h-5 w-5 text-destructive"}),(0,b.jsx)("span",{className:"text-sm font-medium text-destructive",children:"Down"})]})})]})}),(0,b.jsx)("div",{className:"bg-secondary/50 rounded-lg p-4 border shadow-sm hover:shadow-md transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(k.Server,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Redis Cache"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Session Cache"})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:A?(0,b.jsx)("span",{className:"ml-2 inline-block h-3 w-3 rounded-full border-2 border-foreground/30 border-t-[#17D492] animate-spin"}):u?.systemInfo?.redis?.status==="active"?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.CheckCircle2,{className:"h-5 w-5 text-[#17D492]"}),(0,b.jsx)("span",{className:"text-sm font-medium text-[#17D492]",children:"Active"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.XCircle,{className:"h-5 w-5 text-destructive"}),(0,b.jsx)("span",{className:"text-sm font-medium text-destructive",children:"Down"})]})})]})})]})]})]})]}),u&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsxs)(n.Card,{className:"shadow-sm hover:shadow-md transition-shadow",children:[(0,b.jsx)(n.CardHeader,{className:"pb-2",children:(0,b.jsx)(n.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Users"})}),(0,b.jsxs)(n.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold",children:A?"":u.stats?.totalUsers||0}),A&&(0,b.jsx)("span",{className:"mt-2 inline-block h-3 w-3 rounded-full border-2 border-foreground/30 border-t-[#17D492] animate-spin"})]})]}),(0,b.jsxs)(n.Card,{className:"shadow-sm hover:shadow-md transition-shadow",children:[(0,b.jsx)(n.CardHeader,{className:"pb-2",children:(0,b.jsx)(n.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Projects"})}),(0,b.jsxs)(n.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold",children:A?"":u.stats?.totalProjects||0}),A&&(0,b.jsx)("span",{className:"mt-2 inline-block h-3 w-3 rounded-full border-2 border-foreground/30 border-t-[#17D492] animate-spin"})]})]}),(0,b.jsxs)(n.Card,{className:"shadow-sm hover:shadow-md transition-shadow",children:[(0,b.jsx)(n.CardHeader,{className:"pb-2",children:(0,b.jsx)(n.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Active Sessions"})}),(0,b.jsxs)(n.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold",children:A?"":u.stats?.activeSessions||0}),A&&(0,b.jsx)("span",{className:"mt-2 inline-block h-3 w-3 rounded-full border-2 border-foreground/30 border-t-[#17D492] animate-spin"})]})]})]}),u?.systemInfo&&(0,b.jsxs)(n.Card,{className:"shadow-sm hover:shadow-md transition-shadow",children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsx)(n.CardTitle,{children:"System Information"})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"System Health"}),(0,b.jsx)("p",{className:"font-medium capitalize",children:A?"":u.systemInfo.systemHealth||"healthy"}),A&&(0,b.jsx)("span",{className:"mt-2 inline-block h-3 w-3 rounded-full border-2 border-foreground/30 border-t-[#17D492] animate-spin"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Version"}),(0,b.jsx)("p",{className:"font-medium",children:A?"":u.systemInfo.version||"1.0.0"}),A&&(0,b.jsx)("span",{className:"mt-2 inline-block h-3 w-3 rounded-full border-2 border-foreground/30 border-t-[#17D492] animate-spin"})]})]})})]})]})})]})}a.s(["default",()=>r])}];

//# sourceMappingURL=app_auth_dashboards_user_super-admin_page_tsx_5482df78._.js.map