{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport type { NextRequest } from 'next/server';\r\n\r\n/**\r\n * Middleware for mobile device detection and redirect\r\n * \r\n * Note: Next.js 16 shows a deprecation warning for middleware, suggesting \"proxy\" instead.\r\n * However, middleware is still the correct approach for redirects and request modifications.\r\n * This warning is informational and does not affect functionality.\r\n */\r\nexport function middleware(request: NextRequest) {\r\n  const { pathname, search, hash } = request.nextUrl;\r\n  const hostname = request.headers.get('host') || '';\r\n  \r\n  // Get mobile URL from environment variable\r\n  const mobileUrl = process.env.MOBILE_URL || 'm.skyber.dev';\r\n  const mobileHostname = mobileUrl.replace(/^https?:\\/\\//, '').split('/')[0];\r\n  \r\n  // Skip redirect if already on mobile URL or localhost\r\n  if (hostname === mobileHostname || hostname === 'localhost' || hostname.startsWith('127.0.0.1') || hostname.startsWith('localhost:')) {\r\n    return NextResponse.next();\r\n  }\r\n\r\n  // Check if user is on mobile device\r\n  const userAgent = request.headers.get('user-agent') || '';\r\n  const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);\r\n  \r\n  // Also check viewport width from headers (if available)\r\n  const viewportWidth = request.headers.get('viewport-width');\r\n  const isMobileByWidth = viewportWidth ? parseInt(viewportWidth) <= 768 : false;\r\n\r\n  if (isMobile || isMobileByWidth) {\r\n    // Build redirect URL - ensure it has protocol\r\n    const redirectBase = mobileUrl.startsWith('http') ? mobileUrl : `https://${mobileUrl}`;\r\n    const redirectUrl = new URL(`${redirectBase}${pathname}${search}${hash || ''}`);\r\n    \r\n    // Perform redirect\r\n    return NextResponse.redirect(redirectUrl);\r\n  }\r\n\r\n  return NextResponse.next();\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\r\n    /*\r\n     * Match all request paths except for the ones starting with:\r\n     * - api (API routes)\r\n     * - _next/static (static files)\r\n     * - _next/image (image optimization files)\r\n     * - favicon.ico (favicon file)\r\n     */\r\n    '/((?!api|_next/static|_next/image|favicon.ico).*)',\r\n  ],\r\n};\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAUO,SAAS,WAAW,OAAoB;IAC7C,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,QAAQ,OAAO;IAClD,MAAM,WAAW,QAAQ,OAAO,CAAC,GAAG,CAAC,WAAW;IAEhD,2CAA2C;IAC3C,MAAM,YAAY,QAAQ,GAAG,CAAC,UAAU,IAAI;IAC5C,MAAM,iBAAiB,UAAU,OAAO,CAAC,gBAAgB,IAAI,KAAK,CAAC,IAAI,CAAC,EAAE;IAE1E,sDAAsD;IACtD,IAAI,aAAa,kBAAkB,aAAa,eAAe,SAAS,UAAU,CAAC,gBAAgB,SAAS,UAAU,CAAC,eAAe;QACpI,OAAO,+SAAY,CAAC,IAAI;IAC1B;IAEA,oCAAoC;IACpC,MAAM,YAAY,QAAQ,OAAO,CAAC,GAAG,CAAC,iBAAiB;IACvD,MAAM,WAAW,iEAAiE,IAAI,CAAC;IAEvF,wDAAwD;IACxD,MAAM,gBAAgB,QAAQ,OAAO,CAAC,GAAG,CAAC;IAC1C,MAAM,kBAAkB,gBAAgB,SAAS,kBAAkB,MAAM;IAEzE,IAAI,YAAY,iBAAiB;QAC/B,8CAA8C;QAC9C,MAAM,eAAe,UAAU,UAAU,CAAC,UAAU,YAAY,CAAC,QAAQ,EAAE,WAAW;QACtF,MAAM,cAAc,IAAI,IAAI,GAAG,eAAe,WAAW,SAAS,QAAQ,IAAI;QAE9E,mBAAmB;QACnB,OAAO,+SAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,OAAO,+SAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;;;;;;KAMC,GACD;KACD;AACH"}}]
}